<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
        <script>

            //setInterval(function(){var a=(new Date).getTime()/1E3,b=parseInt(a/3600,10)%24,c=parseInt(a/60,10)%60,d=parseInt(a%60,10);time=(10>b?"0"+b:b)+":"+(10>c?"0"+c:c)+":"+(10>d?"0"+d:d);document.getElementById("logupdate").innerHTML=('['+time+' INFO]: Test! This is an automatic test log.<hr/>'+document.getElementById("logupdate").innerHTML)},3500);
        </script>
	<title>
		MineJoin control panel
	</title>
	<link rel="stylesheet" type="text/css" href="style.css">
</head>
<body>
	
	<div class=container>
		<div class="noise header_container">
			<div class=logo></div>
			<div class=customer_info>
				<a>Log out</a>
			</div>
		</div>
		
		<div class=body_container>
			<div class="noise main_sidebar">
				<a class=menubutton style=margin-top:35px href=#/page/Home onclick=menuSelect(this) ><div class=bglyph-home></div> Home</a>
				<a class=menubutton href=#/page/Console onclick=menuSelect(this) ><div class=bglyph-windowed_list></div>Console</a>
				<a class=menubutton href=#/page/Players onclick=menuSelect(this) ><div class=bglyph-user></div>Players</a>
				<a class=menubutton href=#/page/Plugins onclick=menuSelect(this) ><div class=bglyph-squares_four></div>Plugins</a>
				<a class=menubutton href=#/page/FM onclick=menuSelect(this);setTimeout(function(){sendDirReq('.')},110) ><div class=bglyph-folder_closed></div>File Manager</a>
				<a class=menubutton href=#/page/MySQL onclick=menuSelect(this) ><div class=bglyph-compact_list></div>MySQL</a>
				<a class=menubutton href=#/page/Backups onclick=menuSelect(this) ><div class=bglyph-hdd></div>Backups</a>
				<a class=menubutton href=#/page/Tasks onclick=menuSelect(this) ><div class=bglyph-tasks></div>Tasks</a>
			</div>
			
			<div class=main_body_container style="height:100%;overflow:auto">
				<div class=main_body id=main_body>

				</div>
			</div>
		</div>
	</div>
	
	
    <script src="http://pj.gy:8970/socket.io/socket.io.js"></script>
	<script>
		var prevHash;
		setInterval(function(){if(location.hash!=prevHash){prevHash=location.hash;
			if(!window["page"+location.hash.split('/',3)[2]]){
				createPage("404","Page not found","");
			}else{
				if(location.hash.substr(0,7)=="#/page/"){createPage(location.hash.split('/',3)[2],"Server type: Spigot",window["page"+location.hash.split('/',3)[2]]);}
			}
		}},100);

        	var cpuUsage,ramUsage,socketio = io.connect("pj.gy:8970");
        	socketio.on("logUpdate", function(data) {
        		if(document.getElementById('logupdate')){
                	document.getElementById("logupdate").innerHTML=(data['message']+'<hr/>'+document.getElementById("logupdate").innerHTML);
        		}
            });
        	socketio.on("resUpdate", function(data) {
        		if(data['message'] != ""){
        			if(document.getElementById('ramDial')){
        				console.log(data);
        				cpu=data['message'].replace(/^ +/gm, '').split(' ')[0];
        				if(cpu>100){
        					cpu=100;
        				}
        				ram=Math.round(data['message'].replace(/^ +/gm, '').split(' ')[1]/10240);
                		document.getElementById('cpuDial').className = 'orangeProgress-radial orangeProgress-'+Math.round(cpu/5)*5;
                		document.getElementById('cpuDial').innerHTML = '<div class="overlay">'+cpu+'%</div>';
                		document.getElementById('ramDial').className = 'blueProgress-radial blueProgress-'+Math.round(ram/512*100/5)*5;
                		document.getElementById('ramDial').innerHTML = '<div class="overlay">'+Math.round(ram/512*100)+'%</div>';
                		ramUsage=Math.round(data['message'].split(" ")[1] / 10240);
        			}
        		}else{
        			if(document.getElementById('ramDial')){
                		document.getElementById('cpuDial').className = 'orangeProgress-radial orangeProgress-0';
                		document.getElementById('cpuDial').innerHTML = '<div class="overlay">Na%</div>';
                		document.getElementById('ramDial').className = 'blueProgress-radial blueProgress-0';
                		document.getElementById('ramDial').innerHTML = '<div class="overlay">Na%</div>';
        			}
        		}
            });
            socketio.on("dirResp", function(data) {
            	if(!data['subdir']){
	            	if(document.getElementById('FM')){
	            		FMindex=data['message'].split("\n");
	            		document.getElementById('FM').innerHTML='';
	            		for(var i=0;i<FMindex.length-1;i++){
	            			console.log(FMindex[i]);
							document.getElementById('FM').innerHTML+="<a onclick=sendDirReq('"+FMindex[i]+"');>"+FMindex[i]+"</a><hr/>";
						}
	            	}
            	}else{
            		
            	}
            });
            
	    socketio.on("dirResp", function(data) {
	    	if(!data){
            		if(document.getElementById('FMF')){
            			document.getElementById('FMF').innerHTML=data['message'];
            		}
		}
            });
            socketio.on("fileResp", function(data) {
            	if(document.getElementById('FMF')){
            		document.getElementById('FMF').innerHTML=data['message'];
            	}
            });
            socketio.on("fileResp", function(data) {
            	if(document.getElementById('FMF')){
            		document.getElementById('FMF').innerHTML=data['message'];
            	}
            });

            function sendConsoleReq(a) {
                  socketio.emit("sendConsoleReq",{message:a});
            }
            function sendDirReq(a) {
                  socketio.emit("sendDirReq",{message:a});
            }
            
            
            
		function createPage(a,b,c){
			document.getElementById('main_body').innerHTML = '<div class=main_header> \
						<hr> \
						<p style=float:left;>'+a+'</p><p style=float:right;color:#000;>'+b+'</p> \
						<hr style=margin-top:43px;> \
					</div> \
					<div class=main_content>'+c+' \
					</div>';
		}

			var pageHome = '<div class="stats"> \
							<div class=button style=padding-top:28px;padding-bottom:28px; onclick=sendConsoleReq("stop");>Shutdown</div> \
								<div class=button style=top:90px;padding-top:28px;padding-bottom:28px; onclick=sendConsoleReq("stop");>Restart</div> \
								<div class="orangeProgress-radial orangeProgress-0" id=cpuDial style=left:190px;top:13px;><div class="overlay">Na%</div></div> \
								<div class="blueProgress-radial blueProgress-0" id=ramDial style=left:190px;top:13px;><div class="overlay">Na%</div></div> \
							</div> \
							<div style=height:160px;width:100%;margin-top:20px;> \
							<div class=box style=height:160px;width:100%;> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle>Utilities</span></div> \
								<div class=boxcontent> \
									 \
								</div> \
							</div> \
							</div> \
							<div class=ThreeMenuContainer> \
								<div class=box style=width:30%;height:200px> \
									<div class=headerbox><div class=boxicon></div><span class=boxtitle>Server type</span></div> \
									<div class=boxcontent></div> \
								</div> \
								<div class=box style=width:30%;left:35.1%;height:500px;></div> \
								<div class=box style=width:30%;left:69.9%;height:400px;></div> \
							</div>';
			var pageConsole = '<div class=box style=height:500px;width:60%;float:left> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle>Log</span></div> \
								<div class=boxcontent id=logupdate> </div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle>Console</span></div> \
									<div class=boxcontent> \
										<input type=text id=consoleinput><input id=consolesend onclick=sendConsoleReq(document.getElementById("consoleinput").value) type=button value=Send> \
									</div> \
								</div> \
							</div>';
			var pagePlayers='<div class=box style=width:60%;float:left;> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle>Currently online</span></div> \
								<div class=boxcontent> \
									<div style:width:100%;padding:20px;> \
										<ul> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Frash23<div class=badge>Main Developer</div></li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>ecasmb<div class=badge>WHMCS Module Developer</div></li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player3</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player4</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player5</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player6</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player7</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player8</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player9</li> \
											<li><input type=checkbox onclick=this.parentNode.style.background=this.checked===!0?"#bbb":"";>Random_player10</li> \
										</ul> \
									</div> \
								</div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle>Modify players</span></div> \
								<div class=boxcontent style=margin:20px> \
									Do with selected players: \
									<div class=button>Kick</button> \
								</div> \
							</div>';
			var pagePlugins='<div class=box style=height:500px;width:60%;float:left> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
									Content \
								</div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
								</div> \
							</div>';
			var pageFM='<div class=box style=height:500px;width:60%;float:left> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle>Files</span></div> \
								<div class=boxcontent id=FM> </div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle>Actions</span></div> \
								<div class=boxcontent id=FMF> \
									 \
								</div> \
							</div>';
			var pageMySQL='<div class=box style="height:500px;width:75%;margin:0 auto"> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle>Mysql database</span></div> \
								<div class=boxcontent> \
									<div style=position:absolute;top:50%;left:50%;height:32px;width:200px;margin-left:-100px;margin-top:-16px;text-align:center;>You have no databases! Why not <a href=# onclick=this.parentNode.innerHTML="[Not implemented yet]">create one?</span></div> \
								</div> \
							</div> ';
			var pageBackups='<div class=box style=height:500px;width:60%;float:left> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
									Content \
								</div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
								</div> \
							</div>';
			var pageTasks='<div class=box style=height:500px;width:60%;float:left> \
							<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
									Content \
								</div> \
							</div> \
							<div class=box style=height:200px;width:38%;float:right> \
								<div class=headerbox><div class=boxicon></div><span class=boxtitle></span></div> \
								<div class=boxcontent> \
								</div> \
							</div>';
			
							
		createPage('Console','Type of server: Spigot',pageConsole);
		
		function menuSelect(a){
			for(var i=0;i<document.getElementsByClassName('menubutton').length;i++){
				document.getElementsByClassName('menubutton')[i].style.color='#999';
			}
			a.style.color='#fff';
		}
	</script>
	<script src=Bglyphs.js></script>
	
</body>
</html>
